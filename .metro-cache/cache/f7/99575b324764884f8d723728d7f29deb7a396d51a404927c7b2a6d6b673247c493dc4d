{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":52,"index":95}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":38,"index":134}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":176},"end":{"line":5,"column":69,"index":245}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":246},"end":{"line":6,"column":39,"index":285}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useNotifications = useNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[4], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoConstants = require(_dependencyMap[5], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || '';\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function useNotifications() {\n    _s();\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync();\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        console.log('Notification received:', notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        Notifications.removeNotificationSubscription(notificationListener.current);\n        Notifications.removeNotificationSubscription(responseListener.current);\n      };\n    }, []);\n    async function registerForPushNotificationsAsync() {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for Push Notifications');\n        return;\n      }\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Failed to get push token for push notification!');\n        return;\n      }\n      const token = (await Notifications.getExpoPushTokenAsync()).data;\n      console.log('Push token:', token);\n      try {\n        const authToken = await AsyncStorage.default.getItem('authToken');\n        if (authToken && API_URL) {\n          await fetch(`${API_URL}/api/push-token`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${authToken}`\n            },\n            body: JSON.stringify({\n              token\n            })\n          });\n        }\n      } catch (error) {\n        console.error('Error registering push token:', error);\n      }\n      if (Platform.default.OS === 'android') {\n        Notifications.setNotificationChannelAsync('default', {\n          name: 'default',\n          importance: Notifications.AndroidImportance.MAX,\n          vibrationPattern: [0, 250, 250, 250],\n          lightColor: '#00D9FF'\n        });\n      }\n    }\n  }\n  _s(useNotifications, \"wbenL/yD91TDuf9NpWCegWtd3eA=\");\n});","lineCount":114,"map":[[28,2,18,0,"exports"],[28,9,18,0],[28,10,18,0,"useNotifications"],[28,26,18,0],[28,29,18,0,"useNotifications"],[28,45,18,0],[29,2,1,0],[29,6,1,0,"_react"],[29,12,1,0],[29,15,1,0,"require"],[29,22,1,0],[29,23,1,0,"_dependencyMap"],[29,37,1,0],[30,2,2,0],[30,6,2,0,"_expoNotifications"],[30,24,2,0],[30,27,2,0,"require"],[30,34,2,0],[30,35,2,0,"_dependencyMap"],[30,49,2,0],[31,2,2,0],[31,6,2,0,"Notifications"],[31,19,2,0],[31,22,2,0,"_interopNamespace"],[31,39,2,0],[31,40,2,0,"_expoNotifications"],[31,58,2,0],[32,2,3,0],[32,6,3,0,"_expoDevice"],[32,17,3,0],[32,20,3,0,"require"],[32,27,3,0],[32,28,3,0,"_dependencyMap"],[32,42,3,0],[33,2,3,0],[33,6,3,0,"Device"],[33,12,3,0],[33,15,3,0,"_interopNamespace"],[33,32,3,0],[33,33,3,0,"_expoDevice"],[33,44,3,0],[34,2,3,38],[34,6,3,38,"_reactNativeWebDistExportsPlatform"],[34,40,3,38],[34,43,3,38,"require"],[34,50,3,38],[34,51,3,38,"_dependencyMap"],[34,65,3,38],[35,2,3,38],[35,6,3,38,"Platform"],[35,14,3,38],[35,17,3,38,"_interopDefault"],[35,32,3,38],[35,33,3,38,"_reactNativeWebDistExportsPlatform"],[35,67,3,38],[36,2,5,0],[36,6,5,0,"_reactNativeAsyncStorageAsyncStorage"],[36,42,5,0],[36,45,5,0,"require"],[36,52,5,0],[36,53,5,0,"_dependencyMap"],[36,67,5,0],[37,2,5,0],[37,6,5,0,"AsyncStorage"],[37,18,5,0],[37,21,5,0,"_interopDefault"],[37,36,5,0],[37,37,5,0,"_reactNativeAsyncStorageAsyncStorage"],[37,73,5,0],[38,2,6,0],[38,6,6,0,"_expoConstants"],[38,20,6,0],[38,23,6,0,"require"],[38,30,6,0],[38,31,6,0,"_dependencyMap"],[38,45,6,0],[39,2,6,0],[39,6,6,0,"Constants"],[39,15,6,0],[39,18,6,0,"_interopDefault"],[39,33,6,0],[39,34,6,0,"_expoConstants"],[39,48,6,0],[40,2,8,0],[40,8,8,6,"API_URL"],[40,15,8,13],[40,18,8,16,"Constants"],[40,27,8,25],[40,28,8,25,"default"],[40,35,8,25],[40,36,8,26,"expoConfig"],[40,46,8,36],[40,48,8,38,"extra"],[40,53,8,43],[40,55,8,45,"EXPO_PUBLIC_BACKEND_URL"],[40,78,8,68],[40,82,8,72],[40,84,8,74],[41,2,10,0,"Notifications"],[41,15,10,13],[41,16,10,14,"setNotificationHandler"],[41,38,10,36],[41,39,10,37],[42,4,11,2,"handleNotification"],[42,22,11,20],[42,24,11,22],[42,30,11,22,"handleNotification"],[42,31,11,22],[42,37,11,35],[43,6,12,4,"shouldShowAlert"],[43,21,12,19],[43,23,12,21],[43,27,12,25],[44,6,13,4,"shouldPlaySound"],[44,21,13,19],[44,23,13,21],[44,27,13,25],[45,6,14,4,"shouldSetBadge"],[45,20,14,18],[45,22,14,20],[46,4,15,2],[46,5,15,3],[47,2,16,0],[47,3,16,1],[47,4,16,2],[48,2,18,7],[48,11,18,16,"useNotifications"],[48,27,18,32,"useNotifications"],[48,28,18,32],[48,30,18,35],[49,4,18,35,"_s"],[49,6,18,35],[50,4,19,2],[50,10,19,8,"notificationListener"],[50,30,19,28],[50,33,19,31],[50,37,19,31,"useRef"],[50,43,19,37],[50,44,19,37,"useRef"],[50,50,19,37],[50,52,19,43],[50,53,19,44],[51,4,20,2],[51,10,20,8,"responseListener"],[51,26,20,24],[51,29,20,27],[51,33,20,27,"useRef"],[51,39,20,33],[51,40,20,33,"useRef"],[51,46,20,33],[51,48,20,39],[51,49,20,40],[52,4,22,2],[52,8,22,2,"useEffect"],[52,14,22,11],[52,15,22,11,"useEffect"],[52,24,22,11],[52,26,22,12],[52,32,22,18],[53,6,23,4,"registerForPushNotificationsAsync"],[53,39,23,37],[53,40,23,38],[53,41,23,39],[54,6,25,4,"notificationListener"],[54,26,25,24],[54,27,25,25,"current"],[54,34,25,32],[54,37,25,35,"Notifications"],[54,50,25,48],[54,51,25,49,"addNotificationReceivedListener"],[54,82,25,80],[54,83,25,81,"notification"],[54,95,25,93],[54,99,25,97],[55,8,26,6,"console"],[55,15,26,13],[55,16,26,14,"log"],[55,19,26,17],[55,20,26,18],[55,44,26,42],[55,46,26,44,"notification"],[55,58,26,56],[55,59,26,57],[56,6,27,4],[56,7,27,5],[56,8,27,6],[57,6,29,4,"responseListener"],[57,22,29,20],[57,23,29,21,"current"],[57,30,29,28],[57,33,29,31,"Notifications"],[57,46,29,44],[57,47,29,45,"addNotificationResponseReceivedListener"],[57,86,29,84],[57,87,29,85,"response"],[57,95,29,93],[57,99,29,97],[58,8,30,6,"console"],[58,15,30,13],[58,16,30,14,"log"],[58,19,30,17],[58,20,30,18],[58,44,30,42],[58,46,30,44,"response"],[58,54,30,52],[58,55,30,53],[59,6,31,4],[59,7,31,5],[59,8,31,6],[60,6,33,4],[60,13,33,11],[60,19,33,17],[61,8,34,6,"Notifications"],[61,21,34,19],[61,22,34,20,"removeNotificationSubscription"],[61,52,34,50],[61,53,34,51,"notificationListener"],[61,73,34,71],[61,74,34,72,"current"],[61,81,34,79],[61,82,34,80],[62,8,35,6,"Notifications"],[62,21,35,19],[62,22,35,20,"removeNotificationSubscription"],[62,52,35,50],[62,53,35,51,"responseListener"],[62,69,35,67],[62,70,35,68,"current"],[62,77,35,75],[62,78,35,76],[63,6,36,4],[63,7,36,5],[64,4,37,2],[64,5,37,3],[64,7,37,5],[64,9,37,7],[64,10,37,8],[65,4,39,2],[65,19,39,17,"registerForPushNotificationsAsync"],[65,52,39,50,"registerForPushNotificationsAsync"],[65,53,39,50],[65,55,39,53],[66,6,40,4],[66,10,40,8],[66,11,40,9,"Device"],[66,17,40,15],[66,18,40,16,"isDevice"],[66,26,40,24],[66,28,40,26],[67,8,41,6,"console"],[67,15,41,13],[67,16,41,14,"log"],[67,19,41,17],[67,20,41,18],[67,69,41,67],[67,70,41,68],[68,8,42,6],[69,6,43,4],[70,6,45,4],[70,12,45,10],[71,8,45,12,"status"],[71,14,45,18],[71,16,45,20,"existingStatus"],[72,6,45,35],[72,7,45,36],[72,10,45,39],[72,16,45,45,"Notifications"],[72,29,45,58],[72,30,45,59,"getPermissionsAsync"],[72,49,45,78],[72,50,45,79],[72,51,45,80],[73,6,46,4],[73,10,46,8,"finalStatus"],[73,21,46,19],[73,24,46,22,"existingStatus"],[73,38,46,36],[74,6,48,4],[74,10,48,8,"existingStatus"],[74,24,48,22],[74,29,48,27],[74,38,48,36],[74,40,48,38],[75,8,49,6],[75,14,49,12],[76,10,49,14,"status"],[77,8,49,21],[77,9,49,22],[77,12,49,25],[77,18,49,31,"Notifications"],[77,31,49,44],[77,32,49,45,"requestPermissionsAsync"],[77,55,49,68],[77,56,49,69],[77,57,49,70],[78,8,50,6,"finalStatus"],[78,19,50,17],[78,22,50,20,"status"],[78,28,50,26],[79,6,51,4],[80,6,53,4],[80,10,53,8,"finalStatus"],[80,21,53,19],[80,26,53,24],[80,35,53,33],[80,37,53,35],[81,8,54,6,"console"],[81,15,54,13],[81,16,54,14,"log"],[81,19,54,17],[81,20,54,18],[81,69,54,67],[81,70,54,68],[82,8,55,6],[83,6,56,4],[84,6,58,4],[84,12,58,10,"token"],[84,17,58,15],[84,20,58,18],[84,21,58,19],[84,27,58,25,"Notifications"],[84,40,58,38],[84,41,58,39,"getExpoPushTokenAsync"],[84,62,58,60],[84,63,58,61],[84,64,58,62],[84,66,58,64,"data"],[84,70,58,68],[85,6,59,4,"console"],[85,13,59,11],[85,14,59,12,"log"],[85,17,59,15],[85,18,59,16],[85,31,59,29],[85,33,59,31,"token"],[85,38,59,36],[85,39,59,37],[86,6,61,4],[86,10,61,8],[87,8,62,6],[87,14,62,12,"authToken"],[87,23,62,21],[87,26,62,24],[87,32,62,30,"AsyncStorage"],[87,44,62,42],[87,45,62,42,"default"],[87,52,62,42],[87,53,62,43,"getItem"],[87,60,62,50],[87,61,62,51],[87,72,62,62],[87,73,62,63],[88,8,63,6],[88,12,63,10,"authToken"],[88,21,63,19],[88,25,63,23,"API_URL"],[88,32,63,30],[88,34,63,32],[89,10,64,8],[89,16,64,14,"fetch"],[89,21,64,19],[89,22,64,20],[89,25,64,23,"API_URL"],[89,32,64,30],[89,49,64,47],[89,51,64,49],[90,12,65,10,"method"],[90,18,65,16],[90,20,65,18],[90,26,65,24],[91,12,66,10,"headers"],[91,19,66,17],[91,21,66,19],[92,14,67,12],[92,28,67,26],[92,30,67,28],[92,48,67,46],[93,14,68,12],[93,29,68,27],[93,31,68,29],[93,41,68,39,"authToken"],[93,50,68,48],[94,12,69,10],[94,13,69,11],[95,12,70,10,"body"],[95,16,70,14],[95,18,70,16,"JSON"],[95,22,70,20],[95,23,70,21,"stringify"],[95,32,70,30],[95,33,70,31],[96,14,70,33,"token"],[97,12,70,39],[97,13,70,40],[98,10,71,8],[98,11,71,9],[98,12,71,10],[99,8,72,6],[100,6,73,4],[100,7,73,5],[100,8,73,6],[100,15,73,13,"error"],[100,20,73,18],[100,22,73,20],[101,8,74,6,"console"],[101,15,74,13],[101,16,74,14,"error"],[101,21,74,19],[101,22,74,20],[101,53,74,51],[101,55,74,53,"error"],[101,60,74,58],[101,61,74,59],[102,6,75,4],[103,6,77,4],[103,10,77,8,"Platform"],[103,18,77,16],[103,19,77,16,"default"],[103,26,77,16],[103,27,77,17,"OS"],[103,29,77,19],[103,34,77,24],[103,43,77,33],[103,45,77,35],[104,8,78,6,"Notifications"],[104,21,78,19],[104,22,78,20,"setNotificationChannelAsync"],[104,49,78,47],[104,50,78,48],[104,59,78,57],[104,61,78,59],[105,10,79,8,"name"],[105,14,79,12],[105,16,79,14],[105,25,79,23],[106,10,80,8,"importance"],[106,20,80,18],[106,22,80,20,"Notifications"],[106,35,80,33],[106,36,80,34,"AndroidImportance"],[106,53,80,51],[106,54,80,52,"MAX"],[106,57,80,55],[107,10,81,8,"vibrationPattern"],[107,26,81,24],[107,28,81,26],[107,29,81,27],[107,30,81,28],[107,32,81,30],[107,35,81,33],[107,37,81,35],[107,40,81,38],[107,42,81,40],[107,45,81,43],[107,46,81,44],[108,10,82,8,"lightColor"],[108,20,82,18],[108,22,82,20],[109,8,83,6],[109,9,83,7],[109,10,83,8],[110,6,84,4],[111,4,85,2],[112,2,86,0],[113,2,86,1,"_s"],[113,4,86,1],[113,5,18,16,"useNotifications"],[113,21,18,32],[114,0,18,32],[114,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","useNotifications","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync"],"mappings":"AAA;sBCU;IDI;OEG;YCI;iFCG;KDE;qFEE;KFE;WGE;KHG;GDC;EKE;GL8C;CFC"},"hasCjsExports":false},"type":"js/module"}]}