{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":52,"index":95}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":38,"index":134}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":176},"end":{"line":5,"column":69,"index":245}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":246},"end":{"line":6,"column":39,"index":285}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useNotifications = useNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[4], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoConstants = require(_dependencyMap[5], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || '';\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function useNotifications() {\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync();\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        console.log('Notification received:', notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        Notifications.removeNotificationSubscription(notificationListener.current);\n        Notifications.removeNotificationSubscription(responseListener.current);\n      };\n    }, []);\n    async function registerForPushNotificationsAsync() {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for Push Notifications');\n        return;\n      }\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Failed to get push token for push notification!');\n        return;\n      }\n      const token = (await Notifications.getExpoPushTokenAsync()).data;\n      console.log('Push token:', token);\n      try {\n        const authToken = await AsyncStorage.default.getItem('authToken');\n        if (authToken && API_URL) {\n          await fetch(`${API_URL}/api/push-token`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${authToken}`\n            },\n            body: JSON.stringify({\n              token\n            })\n          });\n        }\n      } catch (error) {\n        console.error('Error registering push token:', error);\n      }\n      if (Platform.default.OS === 'android') {\n        Notifications.setNotificationChannelAsync('default', {\n          name: 'default',\n          importance: Notifications.AndroidImportance.MAX,\n          vibrationPattern: [0, 250, 250, 250],\n          lightColor: '#00D9FF'\n        });\n      }\n    }\n  }\n});","lineCount":111,"map":[[27,2,18,0,"exports"],[27,9,18,0],[27,10,18,0,"useNotifications"],[27,26,18,0],[27,29,18,0,"useNotifications"],[27,45,18,0],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_expoNotifications"],[29,24,2,0],[29,27,2,0,"require"],[29,34,2,0],[29,35,2,0,"_dependencyMap"],[29,49,2,0],[30,2,2,0],[30,6,2,0,"Notifications"],[30,19,2,0],[30,22,2,0,"_interopNamespace"],[30,39,2,0],[30,40,2,0,"_expoNotifications"],[30,58,2,0],[31,2,3,0],[31,6,3,0,"_expoDevice"],[31,17,3,0],[31,20,3,0,"require"],[31,27,3,0],[31,28,3,0,"_dependencyMap"],[31,42,3,0],[32,2,3,0],[32,6,3,0,"Device"],[32,12,3,0],[32,15,3,0,"_interopNamespace"],[32,32,3,0],[32,33,3,0,"_expoDevice"],[32,44,3,0],[33,2,3,38],[33,6,3,38,"_reactNativeWebDistExportsPlatform"],[33,40,3,38],[33,43,3,38,"require"],[33,50,3,38],[33,51,3,38,"_dependencyMap"],[33,65,3,38],[34,2,3,38],[34,6,3,38,"Platform"],[34,14,3,38],[34,17,3,38,"_interopDefault"],[34,32,3,38],[34,33,3,38,"_reactNativeWebDistExportsPlatform"],[34,67,3,38],[35,2,5,0],[35,6,5,0,"_reactNativeAsyncStorageAsyncStorage"],[35,42,5,0],[35,45,5,0,"require"],[35,52,5,0],[35,53,5,0,"_dependencyMap"],[35,67,5,0],[36,2,5,0],[36,6,5,0,"AsyncStorage"],[36,18,5,0],[36,21,5,0,"_interopDefault"],[36,36,5,0],[36,37,5,0,"_reactNativeAsyncStorageAsyncStorage"],[36,73,5,0],[37,2,6,0],[37,6,6,0,"_expoConstants"],[37,20,6,0],[37,23,6,0,"require"],[37,30,6,0],[37,31,6,0,"_dependencyMap"],[37,45,6,0],[38,2,6,0],[38,6,6,0,"Constants"],[38,15,6,0],[38,18,6,0,"_interopDefault"],[38,33,6,0],[38,34,6,0,"_expoConstants"],[38,48,6,0],[39,2,8,0],[39,8,8,6,"API_URL"],[39,15,8,13],[39,18,8,16,"Constants"],[39,27,8,25],[39,28,8,25,"default"],[39,35,8,25],[39,36,8,26,"expoConfig"],[39,46,8,36],[39,48,8,38,"extra"],[39,53,8,43],[39,55,8,45,"EXPO_PUBLIC_BACKEND_URL"],[39,78,8,68],[39,82,8,72],[39,84,8,74],[40,2,10,0,"Notifications"],[40,15,10,13],[40,16,10,14,"setNotificationHandler"],[40,38,10,36],[40,39,10,37],[41,4,11,2,"handleNotification"],[41,22,11,20],[41,24,11,22],[41,30,11,22,"handleNotification"],[41,31,11,22],[41,37,11,35],[42,6,12,4,"shouldShowAlert"],[42,21,12,19],[42,23,12,21],[42,27,12,25],[43,6,13,4,"shouldPlaySound"],[43,21,13,19],[43,23,13,21],[43,27,13,25],[44,6,14,4,"shouldSetBadge"],[44,20,14,18],[44,22,14,20],[45,4,15,2],[45,5,15,3],[46,2,16,0],[46,3,16,1],[46,4,16,2],[47,2,18,7],[47,11,18,16,"useNotifications"],[47,27,18,32,"useNotifications"],[47,28,18,32],[47,30,18,35],[48,4,19,2],[48,10,19,8,"notificationListener"],[48,30,19,28],[48,33,19,31],[48,37,19,31,"useRef"],[48,43,19,37],[48,44,19,37,"useRef"],[48,50,19,37],[48,52,19,43],[48,53,19,44],[49,4,20,2],[49,10,20,8,"responseListener"],[49,26,20,24],[49,29,20,27],[49,33,20,27,"useRef"],[49,39,20,33],[49,40,20,33,"useRef"],[49,46,20,33],[49,48,20,39],[49,49,20,40],[50,4,22,2],[50,8,22,2,"useEffect"],[50,14,22,11],[50,15,22,11,"useEffect"],[50,24,22,11],[50,26,22,12],[50,32,22,18],[51,6,23,4,"registerForPushNotificationsAsync"],[51,39,23,37],[51,40,23,38],[51,41,23,39],[52,6,25,4,"notificationListener"],[52,26,25,24],[52,27,25,25,"current"],[52,34,25,32],[52,37,25,35,"Notifications"],[52,50,25,48],[52,51,25,49,"addNotificationReceivedListener"],[52,82,25,80],[52,83,25,81,"notification"],[52,95,25,93],[52,99,25,97],[53,8,26,6,"console"],[53,15,26,13],[53,16,26,14,"log"],[53,19,26,17],[53,20,26,18],[53,44,26,42],[53,46,26,44,"notification"],[53,58,26,56],[53,59,26,57],[54,6,27,4],[54,7,27,5],[54,8,27,6],[55,6,29,4,"responseListener"],[55,22,29,20],[55,23,29,21,"current"],[55,30,29,28],[55,33,29,31,"Notifications"],[55,46,29,44],[55,47,29,45,"addNotificationResponseReceivedListener"],[55,86,29,84],[55,87,29,85,"response"],[55,95,29,93],[55,99,29,97],[56,8,30,6,"console"],[56,15,30,13],[56,16,30,14,"log"],[56,19,30,17],[56,20,30,18],[56,44,30,42],[56,46,30,44,"response"],[56,54,30,52],[56,55,30,53],[57,6,31,4],[57,7,31,5],[57,8,31,6],[58,6,33,4],[58,13,33,11],[58,19,33,17],[59,8,34,6,"Notifications"],[59,21,34,19],[59,22,34,20,"removeNotificationSubscription"],[59,52,34,50],[59,53,34,51,"notificationListener"],[59,73,34,71],[59,74,34,72,"current"],[59,81,34,79],[59,82,34,80],[60,8,35,6,"Notifications"],[60,21,35,19],[60,22,35,20,"removeNotificationSubscription"],[60,52,35,50],[60,53,35,51,"responseListener"],[60,69,35,67],[60,70,35,68,"current"],[60,77,35,75],[60,78,35,76],[61,6,36,4],[61,7,36,5],[62,4,37,2],[62,5,37,3],[62,7,37,5],[62,9,37,7],[62,10,37,8],[63,4,39,2],[63,19,39,17,"registerForPushNotificationsAsync"],[63,52,39,50,"registerForPushNotificationsAsync"],[63,53,39,50],[63,55,39,53],[64,6,40,4],[64,10,40,8],[64,11,40,9,"Device"],[64,17,40,15],[64,18,40,16,"isDevice"],[64,26,40,24],[64,28,40,26],[65,8,41,6,"console"],[65,15,41,13],[65,16,41,14,"log"],[65,19,41,17],[65,20,41,18],[65,69,41,67],[65,70,41,68],[66,8,42,6],[67,6,43,4],[68,6,45,4],[68,12,45,10],[69,8,45,12,"status"],[69,14,45,18],[69,16,45,20,"existingStatus"],[70,6,45,35],[70,7,45,36],[70,10,45,39],[70,16,45,45,"Notifications"],[70,29,45,58],[70,30,45,59,"getPermissionsAsync"],[70,49,45,78],[70,50,45,79],[70,51,45,80],[71,6,46,4],[71,10,46,8,"finalStatus"],[71,21,46,19],[71,24,46,22,"existingStatus"],[71,38,46,36],[72,6,48,4],[72,10,48,8,"existingStatus"],[72,24,48,22],[72,29,48,27],[72,38,48,36],[72,40,48,38],[73,8,49,6],[73,14,49,12],[74,10,49,14,"status"],[75,8,49,21],[75,9,49,22],[75,12,49,25],[75,18,49,31,"Notifications"],[75,31,49,44],[75,32,49,45,"requestPermissionsAsync"],[75,55,49,68],[75,56,49,69],[75,57,49,70],[76,8,50,6,"finalStatus"],[76,19,50,17],[76,22,50,20,"status"],[76,28,50,26],[77,6,51,4],[78,6,53,4],[78,10,53,8,"finalStatus"],[78,21,53,19],[78,26,53,24],[78,35,53,33],[78,37,53,35],[79,8,54,6,"console"],[79,15,54,13],[79,16,54,14,"log"],[79,19,54,17],[79,20,54,18],[79,69,54,67],[79,70,54,68],[80,8,55,6],[81,6,56,4],[82,6,58,4],[82,12,58,10,"token"],[82,17,58,15],[82,20,58,18],[82,21,58,19],[82,27,58,25,"Notifications"],[82,40,58,38],[82,41,58,39,"getExpoPushTokenAsync"],[82,62,58,60],[82,63,58,61],[82,64,58,62],[82,66,58,64,"data"],[82,70,58,68],[83,6,59,4,"console"],[83,13,59,11],[83,14,59,12,"log"],[83,17,59,15],[83,18,59,16],[83,31,59,29],[83,33,59,31,"token"],[83,38,59,36],[83,39,59,37],[84,6,61,4],[84,10,61,8],[85,8,62,6],[85,14,62,12,"authToken"],[85,23,62,21],[85,26,62,24],[85,32,62,30,"AsyncStorage"],[85,44,62,42],[85,45,62,42,"default"],[85,52,62,42],[85,53,62,43,"getItem"],[85,60,62,50],[85,61,62,51],[85,72,62,62],[85,73,62,63],[86,8,63,6],[86,12,63,10,"authToken"],[86,21,63,19],[86,25,63,23,"API_URL"],[86,32,63,30],[86,34,63,32],[87,10,64,8],[87,16,64,14,"fetch"],[87,21,64,19],[87,22,64,20],[87,25,64,23,"API_URL"],[87,32,64,30],[87,49,64,47],[87,51,64,49],[88,12,65,10,"method"],[88,18,65,16],[88,20,65,18],[88,26,65,24],[89,12,66,10,"headers"],[89,19,66,17],[89,21,66,19],[90,14,67,12],[90,28,67,26],[90,30,67,28],[90,48,67,46],[91,14,68,12],[91,29,68,27],[91,31,68,29],[91,41,68,39,"authToken"],[91,50,68,48],[92,12,69,10],[92,13,69,11],[93,12,70,10,"body"],[93,16,70,14],[93,18,70,16,"JSON"],[93,22,70,20],[93,23,70,21,"stringify"],[93,32,70,30],[93,33,70,31],[94,14,70,33,"token"],[95,12,70,39],[95,13,70,40],[96,10,71,8],[96,11,71,9],[96,12,71,10],[97,8,72,6],[98,6,73,4],[98,7,73,5],[98,8,73,6],[98,15,73,13,"error"],[98,20,73,18],[98,22,73,20],[99,8,74,6,"console"],[99,15,74,13],[99,16,74,14,"error"],[99,21,74,19],[99,22,74,20],[99,53,74,51],[99,55,74,53,"error"],[99,60,74,58],[99,61,74,59],[100,6,75,4],[101,6,77,4],[101,10,77,8,"Platform"],[101,18,77,16],[101,19,77,16,"default"],[101,26,77,16],[101,27,77,17,"OS"],[101,29,77,19],[101,34,77,24],[101,43,77,33],[101,45,77,35],[102,8,78,6,"Notifications"],[102,21,78,19],[102,22,78,20,"setNotificationChannelAsync"],[102,49,78,47],[102,50,78,48],[102,59,78,57],[102,61,78,59],[103,10,79,8,"name"],[103,14,79,12],[103,16,79,14],[103,25,79,23],[104,10,80,8,"importance"],[104,20,80,18],[104,22,80,20,"Notifications"],[104,35,80,33],[104,36,80,34,"AndroidImportance"],[104,53,80,51],[104,54,80,52,"MAX"],[104,57,80,55],[105,10,81,8,"vibrationPattern"],[105,26,81,24],[105,28,81,26],[105,29,81,27],[105,30,81,28],[105,32,81,30],[105,35,81,33],[105,37,81,35],[105,40,81,38],[105,42,81,40],[105,45,81,43],[105,46,81,44],[106,10,82,8,"lightColor"],[106,20,82,18],[106,22,82,20],[107,8,83,6],[107,9,83,7],[107,10,83,8],[108,6,84,4],[109,4,85,2],[110,2,86,0],[111,0,86,1],[111,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","useNotifications","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync"],"mappings":"AAA;sBCU;IDI;OEG;YCI;iFCG;KDE;qFEE;KFE;WGE;KHG;GDC;EKE;GL8C;CFC"},"hasCjsExports":false},"type":"js/module"}]}