{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":52,"index":105}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":38,"index":144}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":186},"end":{"line":5,"column":69,"index":255}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":256},"end":{"line":6,"column":39,"index":295}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useNotifications = useNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[4], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoConstants = require(_dependencyMap[5], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || '';\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function useNotifications() {\n    _s();\n    const [expoPushToken, setExpoPushToken] = (0, _react.useState)(undefined);\n    const [notification, setNotification] = (0, _react.useState)(undefined);\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync();\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        console.log('Notification received:', notification);\n        setNotification(notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        Notifications.removeNotificationSubscription(notificationListener.current);\n        Notifications.removeNotificationSubscription(responseListener.current);\n      };\n    }, []);\n    async function registerForPushNotificationsAsync() {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for Push Notifications');\n        return;\n      }\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Failed to get push token for push notification!');\n        return;\n      }\n      const token = (await Notifications.getExpoPushTokenAsync()).data;\n      console.log('Push token:', token);\n      setExpoPushToken(token);\n      try {\n        const authToken = await AsyncStorage.default.getItem('authToken');\n        if (authToken && API_URL) {\n          await fetch(`${API_URL}/api/push-token`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${authToken}`\n            },\n            body: JSON.stringify({\n              token\n            })\n          });\n        }\n      } catch (error) {\n        console.error('Error registering push token:', error);\n      }\n      if (Platform.default.OS === 'android') {\n        Notifications.setNotificationChannelAsync('default', {\n          name: 'default',\n          importance: Notifications.AndroidImportance.MAX,\n          vibrationPattern: [0, 250, 250, 250],\n          lightColor: '#00D9FF'\n        });\n      }\n    }\n    return {\n      expoPushToken,\n      notification\n    };\n  }\n  _s(useNotifications, \"fqOeAS08jQa6jYUzSieLvJIooDQ=\");\n});","lineCount":122,"map":[[28,2,18,0,"exports"],[28,9,18,0],[28,10,18,0,"useNotifications"],[28,26,18,0],[28,29,18,0,"useNotifications"],[28,45,18,0],[29,2,1,0],[29,6,1,0,"_react"],[29,12,1,0],[29,15,1,0,"require"],[29,22,1,0],[29,23,1,0,"_dependencyMap"],[29,37,1,0],[30,2,2,0],[30,6,2,0,"_expoNotifications"],[30,24,2,0],[30,27,2,0,"require"],[30,34,2,0],[30,35,2,0,"_dependencyMap"],[30,49,2,0],[31,2,2,0],[31,6,2,0,"Notifications"],[31,19,2,0],[31,22,2,0,"_interopNamespace"],[31,39,2,0],[31,40,2,0,"_expoNotifications"],[31,58,2,0],[32,2,3,0],[32,6,3,0,"_expoDevice"],[32,17,3,0],[32,20,3,0,"require"],[32,27,3,0],[32,28,3,0,"_dependencyMap"],[32,42,3,0],[33,2,3,0],[33,6,3,0,"Device"],[33,12,3,0],[33,15,3,0,"_interopNamespace"],[33,32,3,0],[33,33,3,0,"_expoDevice"],[33,44,3,0],[34,2,3,38],[34,6,3,38,"_reactNativeWebDistExportsPlatform"],[34,40,3,38],[34,43,3,38,"require"],[34,50,3,38],[34,51,3,38,"_dependencyMap"],[34,65,3,38],[35,2,3,38],[35,6,3,38,"Platform"],[35,14,3,38],[35,17,3,38,"_interopDefault"],[35,32,3,38],[35,33,3,38,"_reactNativeWebDistExportsPlatform"],[35,67,3,38],[36,2,5,0],[36,6,5,0,"_reactNativeAsyncStorageAsyncStorage"],[36,42,5,0],[36,45,5,0,"require"],[36,52,5,0],[36,53,5,0,"_dependencyMap"],[36,67,5,0],[37,2,5,0],[37,6,5,0,"AsyncStorage"],[37,18,5,0],[37,21,5,0,"_interopDefault"],[37,36,5,0],[37,37,5,0,"_reactNativeAsyncStorageAsyncStorage"],[37,73,5,0],[38,2,6,0],[38,6,6,0,"_expoConstants"],[38,20,6,0],[38,23,6,0,"require"],[38,30,6,0],[38,31,6,0,"_dependencyMap"],[38,45,6,0],[39,2,6,0],[39,6,6,0,"Constants"],[39,15,6,0],[39,18,6,0,"_interopDefault"],[39,33,6,0],[39,34,6,0,"_expoConstants"],[39,48,6,0],[40,2,8,0],[40,8,8,6,"API_URL"],[40,15,8,13],[40,18,8,16,"Constants"],[40,27,8,25],[40,28,8,25,"default"],[40,35,8,25],[40,36,8,26,"expoConfig"],[40,46,8,36],[40,48,8,38,"extra"],[40,53,8,43],[40,55,8,45,"EXPO_PUBLIC_BACKEND_URL"],[40,78,8,68],[40,82,8,72],[40,84,8,74],[41,2,10,0,"Notifications"],[41,15,10,13],[41,16,10,14,"setNotificationHandler"],[41,38,10,36],[41,39,10,37],[42,4,11,2,"handleNotification"],[42,22,11,20],[42,24,11,22],[42,30,11,22,"handleNotification"],[42,31,11,22],[42,37,11,35],[43,6,12,4,"shouldShowAlert"],[43,21,12,19],[43,23,12,21],[43,27,12,25],[44,6,13,4,"shouldPlaySound"],[44,21,13,19],[44,23,13,21],[44,27,13,25],[45,6,14,4,"shouldSetBadge"],[45,20,14,18],[45,22,14,20],[46,4,15,2],[46,5,15,3],[47,2,16,0],[47,3,16,1],[47,4,16,2],[48,2,18,7],[48,11,18,16,"useNotifications"],[48,27,18,32,"useNotifications"],[48,28,18,32],[48,30,18,35],[49,4,18,35,"_s"],[49,6,18,35],[50,4,19,2],[50,10,19,8],[50,11,19,9,"expoPushToken"],[50,24,19,22],[50,26,19,24,"setExpoPushToken"],[50,42,19,40],[50,43,19,41],[50,46,19,44],[50,50,19,44,"useState"],[50,56,19,52],[50,57,19,52,"useState"],[50,65,19,52],[50,67,19,73,"undefined"],[50,76,19,82],[50,77,19,83],[51,4,20,2],[51,10,20,8],[51,11,20,9,"notification"],[51,23,20,21],[51,25,20,23,"setNotification"],[51,40,20,38],[51,41,20,39],[51,44,20,42],[51,48,20,42,"useState"],[51,54,20,50],[51,55,20,50,"useState"],[51,63,20,50],[51,65,20,91,"undefined"],[51,74,20,100],[51,75,20,101],[52,4,21,2],[52,10,21,8,"notificationListener"],[52,30,21,28],[52,33,21,31],[52,37,21,31,"useRef"],[52,43,21,37],[52,44,21,37,"useRef"],[52,50,21,37],[52,52,21,43],[52,53,21,44],[53,4,22,2],[53,10,22,8,"responseListener"],[53,26,22,24],[53,29,22,27],[53,33,22,27,"useRef"],[53,39,22,33],[53,40,22,33,"useRef"],[53,46,22,33],[53,48,22,39],[53,49,22,40],[54,4,24,2],[54,8,24,2,"useEffect"],[54,14,24,11],[54,15,24,11,"useEffect"],[54,24,24,11],[54,26,24,12],[54,32,24,18],[55,6,25,4,"registerForPushNotificationsAsync"],[55,39,25,37],[55,40,25,38],[55,41,25,39],[56,6,27,4,"notificationListener"],[56,26,27,24],[56,27,27,25,"current"],[56,34,27,32],[56,37,27,35,"Notifications"],[56,50,27,48],[56,51,27,49,"addNotificationReceivedListener"],[56,82,27,80],[56,83,27,81,"notification"],[56,95,27,93],[56,99,27,97],[57,8,28,6,"console"],[57,15,28,13],[57,16,28,14,"log"],[57,19,28,17],[57,20,28,18],[57,44,28,42],[57,46,28,44,"notification"],[57,58,28,56],[57,59,28,57],[58,8,29,6,"setNotification"],[58,23,29,21],[58,24,29,22,"notification"],[58,36,29,34],[58,37,29,35],[59,6,30,4],[59,7,30,5],[59,8,30,6],[60,6,32,4,"responseListener"],[60,22,32,20],[60,23,32,21,"current"],[60,30,32,28],[60,33,32,31,"Notifications"],[60,46,32,44],[60,47,32,45,"addNotificationResponseReceivedListener"],[60,86,32,84],[60,87,32,85,"response"],[60,95,32,93],[60,99,32,97],[61,8,33,6,"console"],[61,15,33,13],[61,16,33,14,"log"],[61,19,33,17],[61,20,33,18],[61,44,33,42],[61,46,33,44,"response"],[61,54,33,52],[61,55,33,53],[62,6,34,4],[62,7,34,5],[62,8,34,6],[63,6,36,4],[63,13,36,11],[63,19,36,17],[64,8,37,6,"Notifications"],[64,21,37,19],[64,22,37,20,"removeNotificationSubscription"],[64,52,37,50],[64,53,37,51,"notificationListener"],[64,73,37,71],[64,74,37,72,"current"],[64,81,37,79],[64,82,37,80],[65,8,38,6,"Notifications"],[65,21,38,19],[65,22,38,20,"removeNotificationSubscription"],[65,52,38,50],[65,53,38,51,"responseListener"],[65,69,38,67],[65,70,38,68,"current"],[65,77,38,75],[65,78,38,76],[66,6,39,4],[66,7,39,5],[67,4,40,2],[67,5,40,3],[67,7,40,5],[67,9,40,7],[67,10,40,8],[68,4,42,2],[68,19,42,17,"registerForPushNotificationsAsync"],[68,52,42,50,"registerForPushNotificationsAsync"],[68,53,42,50],[68,55,42,53],[69,6,43,4],[69,10,43,8],[69,11,43,9,"Device"],[69,17,43,15],[69,18,43,16,"isDevice"],[69,26,43,24],[69,28,43,26],[70,8,44,6,"console"],[70,15,44,13],[70,16,44,14,"log"],[70,19,44,17],[70,20,44,18],[70,69,44,67],[70,70,44,68],[71,8,45,6],[72,6,46,4],[73,6,48,4],[73,12,48,10],[74,8,48,12,"status"],[74,14,48,18],[74,16,48,20,"existingStatus"],[75,6,48,35],[75,7,48,36],[75,10,48,39],[75,16,48,45,"Notifications"],[75,29,48,58],[75,30,48,59,"getPermissionsAsync"],[75,49,48,78],[75,50,48,79],[75,51,48,80],[76,6,49,4],[76,10,49,8,"finalStatus"],[76,21,49,19],[76,24,49,22,"existingStatus"],[76,38,49,36],[77,6,51,4],[77,10,51,8,"existingStatus"],[77,24,51,22],[77,29,51,27],[77,38,51,36],[77,40,51,38],[78,8,52,6],[78,14,52,12],[79,10,52,14,"status"],[80,8,52,21],[80,9,52,22],[80,12,52,25],[80,18,52,31,"Notifications"],[80,31,52,44],[80,32,52,45,"requestPermissionsAsync"],[80,55,52,68],[80,56,52,69],[80,57,52,70],[81,8,53,6,"finalStatus"],[81,19,53,17],[81,22,53,20,"status"],[81,28,53,26],[82,6,54,4],[83,6,56,4],[83,10,56,8,"finalStatus"],[83,21,56,19],[83,26,56,24],[83,35,56,33],[83,37,56,35],[84,8,57,6,"console"],[84,15,57,13],[84,16,57,14,"log"],[84,19,57,17],[84,20,57,18],[84,69,57,67],[84,70,57,68],[85,8,58,6],[86,6,59,4],[87,6,61,4],[87,12,61,10,"token"],[87,17,61,15],[87,20,61,18],[87,21,61,19],[87,27,61,25,"Notifications"],[87,40,61,38],[87,41,61,39,"getExpoPushTokenAsync"],[87,62,61,60],[87,63,61,61],[87,64,61,62],[87,66,61,64,"data"],[87,70,61,68],[88,6,62,4,"console"],[88,13,62,11],[88,14,62,12,"log"],[88,17,62,15],[88,18,62,16],[88,31,62,29],[88,33,62,31,"token"],[88,38,62,36],[88,39,62,37],[89,6,63,4,"setExpoPushToken"],[89,22,63,20],[89,23,63,21,"token"],[89,28,63,26],[89,29,63,27],[90,6,65,4],[90,10,65,8],[91,8,66,6],[91,14,66,12,"authToken"],[91,23,66,21],[91,26,66,24],[91,32,66,30,"AsyncStorage"],[91,44,66,42],[91,45,66,42,"default"],[91,52,66,42],[91,53,66,43,"getItem"],[91,60,66,50],[91,61,66,51],[91,72,66,62],[91,73,66,63],[92,8,67,6],[92,12,67,10,"authToken"],[92,21,67,19],[92,25,67,23,"API_URL"],[92,32,67,30],[92,34,67,32],[93,10,68,8],[93,16,68,14,"fetch"],[93,21,68,19],[93,22,68,20],[93,25,68,23,"API_URL"],[93,32,68,30],[93,49,68,47],[93,51,68,49],[94,12,69,10,"method"],[94,18,69,16],[94,20,69,18],[94,26,69,24],[95,12,70,10,"headers"],[95,19,70,17],[95,21,70,19],[96,14,71,12],[96,28,71,26],[96,30,71,28],[96,48,71,46],[97,14,72,12],[97,29,72,27],[97,31,72,29],[97,41,72,39,"authToken"],[97,50,72,48],[98,12,73,10],[98,13,73,11],[99,12,74,10,"body"],[99,16,74,14],[99,18,74,16,"JSON"],[99,22,74,20],[99,23,74,21,"stringify"],[99,32,74,30],[99,33,74,31],[100,14,74,33,"token"],[101,12,74,39],[101,13,74,40],[102,10,75,8],[102,11,75,9],[102,12,75,10],[103,8,76,6],[104,6,77,4],[104,7,77,5],[104,8,77,6],[104,15,77,13,"error"],[104,20,77,18],[104,22,77,20],[105,8,78,6,"console"],[105,15,78,13],[105,16,78,14,"error"],[105,21,78,19],[105,22,78,20],[105,53,78,51],[105,55,78,53,"error"],[105,60,78,58],[105,61,78,59],[106,6,79,4],[107,6,81,4],[107,10,81,8,"Platform"],[107,18,81,16],[107,19,81,16,"default"],[107,26,81,16],[107,27,81,17,"OS"],[107,29,81,19],[107,34,81,24],[107,43,81,33],[107,45,81,35],[108,8,82,6,"Notifications"],[108,21,82,19],[108,22,82,20,"setNotificationChannelAsync"],[108,49,82,47],[108,50,82,48],[108,59,82,57],[108,61,82,59],[109,10,83,8,"name"],[109,14,83,12],[109,16,83,14],[109,25,83,23],[110,10,84,8,"importance"],[110,20,84,18],[110,22,84,20,"Notifications"],[110,35,84,33],[110,36,84,34,"AndroidImportance"],[110,53,84,51],[110,54,84,52,"MAX"],[110,57,84,55],[111,10,85,8,"vibrationPattern"],[111,26,85,24],[111,28,85,26],[111,29,85,27],[111,30,85,28],[111,32,85,30],[111,35,85,33],[111,37,85,35],[111,40,85,38],[111,42,85,40],[111,45,85,43],[111,46,85,44],[112,10,86,8,"lightColor"],[112,20,86,18],[112,22,86,20],[113,8,87,6],[113,9,87,7],[113,10,87,8],[114,6,88,4],[115,4,89,2],[116,4,91,2],[116,11,91,9],[117,6,92,4,"expoPushToken"],[117,19,92,17],[118,6,93,4,"notification"],[119,4,94,2],[119,5,94,3],[120,2,95,0],[121,2,95,1,"_s"],[121,4,95,1],[121,5,18,16,"useNotifications"],[121,21,18,32],[122,0,18,32],[122,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","useNotifications","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync"],"mappings":"AAA;sBCU;IDI;OEG;YCM;iFCG;KDG;qFEE;KFE;WGE;KHG;GDC;EKE;GL+C;CFM"},"hasCjsExports":false},"type":"js/module"}]}