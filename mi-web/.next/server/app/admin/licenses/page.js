(()=>{var e={};e.id=518,e.ids=[518],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1172:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>c});var a=s(482),r=s(9108),l=s(2563),n=s.n(l),i=s(8300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["admin",{children:["licenses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8946)),"/app/mi-web/app/admin/licenses/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/app/mi-web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],o=["/app/mi-web/app/admin/licenses/page.tsx"],x="/admin/licenses/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/licenses/page",pathname:"/admin/licenses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7434:(e,t,s)=>{Promise.resolve().then(s.bind(s,601))},601:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(2295),r=s(3729),l=s(8480),n=s(8117),i=s(3733),d=s(1838),c=s(8765),o=s(2965),x=s(2312),u=s(1960);function p(){let[e,t]=(0,r.useState)([]),[s,p]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),[g,y]=(0,r.useState)(""),[b,f]=(0,r.useState)("all"),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(1),[k,_]=(0,r.useState)("");(0,r.useEffect)(()=>{Z()},[]),(0,r.useEffect)(()=>{P()},[e,g,b]);let Z=async()=>{try{let e=await (0,n.R1)("/admin/licenses");t(e.licenses||[])}catch(e){console.error("Failed to load licenses:",e)}finally{h(!1)}},P=()=>{let t=[...e];if(g){let e=g.toLowerCase();t=t.filter(t=>t.key?.toLowerCase().includes(e)||t.assigned_to?.toLowerCase().includes(e))}"used"===b&&(t=t.filter(e=>"used"===e.status)),"unused"===b&&(t=t.filter(e=>"used"!==e.status)),p(t)},M=async()=>{v(!0);try{await (0,n.sg)("/admin/licenses/generate",{count:N}),Z()}catch(e){console.error("Failed to generate licenses:",e)}finally{v(!1)}},C=e=>{navigator.clipboard.writeText(e),_(e),setTimeout(()=>_(""),2e3)},q=e.filter(e=>"used"===e.status).length,S=e.filter(e=>"used"!==e.status).length;return a.jsx(l.Z,{role:"admin",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Licenses"}),(0,a.jsxs)("p",{className:"text-gray-500 mt-1",children:[q," used \xb7 ",S," available"]})]}),a.jsx("div",{className:"flex gap-3",children:(0,a.jsxs)("button",{onClick:Z,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium text-gray-700 flex items-center gap-2",children:[a.jsx(i.Z,{size:18}),"Refresh"]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generate New Licenses"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"number",min:1,max:100,value:N,onChange:e=>w(Math.max(1,Math.min(100,parseInt(e.target.value)||1))),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Number of licenses"})}),(0,a.jsxs)("button",{onClick:M,disabled:j,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl font-medium text-white flex items-center gap-2 disabled:opacity-50",children:[a.jsx(d.Z,{size:18}),j?"Generating...":`Generate ${N} License${N>1?"s":""}`]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(c.Z,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by key or assigned user...",value:g,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Licenses"}),a.jsx("option",{value:"used",children:"Used"}),a.jsx("option",{value:"unused",children:"Available"})]})]}),a.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:m?a.jsx("div",{className:"p-8 text-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):0===s.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[a.jsx(o.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No licenses found"})]}):(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"License Key"}),a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Status"}),a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Assigned To"}),a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Generated By"}),a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Created"}),a.jsx("th",{className:"text-right py-4 px-6 text-sm font-medium text-gray-500",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-6",children:a.jsx("code",{className:"bg-gray-100 px-3 py-1 rounded-lg text-sm font-mono",children:e.key})}),a.jsx("td",{className:"py-4 px-6",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"used"===e.status?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:"used"===e.status?"Used":"Available"})}),a.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:e.assigned_to||"-"}),a.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:e.generated_by||"Admin"}),a.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString():"-"}),a.jsx("td",{className:"py-4 px-6 text-right",children:a.jsx("button",{onClick:()=>C(e.key),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-600 transition-colors",title:"Copy to clipboard",children:k===e.key?a.jsx(x.Z,{size:18,className:"text-green-600"}):a.jsx(u.Z,{size:18})})})]},e._id||e.key))})]})})]})})}},2312:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1960:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},1838:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3733:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8765:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8946:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let a=(0,s(6843).createProxy)(String.raw`/app/mi-web/app/admin/licenses/page.tsx`),{__esModule:r,$$typeof:l}=a,n=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[73,336],()=>s(1172));module.exports=a})();