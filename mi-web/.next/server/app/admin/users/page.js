(()=>{var e={};e.id=674,e.ids=[674],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4122:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var a=s(482),r=s(9108),l=s(2563),n=s.n(l),i=s(8300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1985)),"/app/mi-web/app/admin/users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/app/mi-web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/app/mi-web/app/admin/users/page.tsx"],x="/admin/users/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9213:(e,t,s)=>{Promise.resolve().then(s.bind(s,5895))},5895:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(2295),r=s(3729),l=s(8480),n=s(9406),i=s(8117),d=s(3733);let o=(0,s(7075).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var c=s(8765),x=s(5366),u=s(2817),m=s(2965),p=s(8271);function h(){let[e,t]=(0,r.useState)([]),[s,h]=(0,r.useState)([]),[y,g]=(0,r.useState)(!0),[b,f]=(0,r.useState)(""),[j,v]=(0,r.useState)("all"),[N,w]=(0,r.useState)(null),[k,_]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),[Z,M]=(0,r.useState)(""),[q,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{z()},[]),(0,r.useEffect)(()=>{A()},[e,b,j]);let z=async()=>{try{let e=await (0,i.R1)("/admin/users");t(e.users||[])}catch(e){console.error("Failed to load users:",e)}finally{g(!1)}},A=()=>{let t=[...e];if(b){let e=b.toLowerCase();t=t.filter(t=>t.email?.toLowerCase().includes(e)||t.name?.toLowerCase().includes(e))}"active"===j&&(t=t.filter(e=>"active"===e.status)),"pending"===j&&(t=t.filter(e=>"pending"===e.status)),"paid"===j&&(t=t.filter(e=>"paid"===e.payment_status)),"unpaid"===j&&(t=t.filter(e=>"paid"!==e.payment_status)),h(t)},E=async e=>{S(!0);try{await (0,i.sg)(`/admin/users/${e._id}/approve`,{}),z()}catch(e){console.error("Failed to approve user:",e)}finally{S(!1)}},F=async e=>{S(!0);try{await (0,i.sg)(`/admin/users/${e._id}/deny`,{}),z()}catch(e){console.error("Failed to deny user:",e)}finally{S(!1)}},U=async()=>{if(N){S(!0);try{await (0,i.QW)(`/admin/users/${N._id}`),_(!1),w(null),z()}catch(e){console.error("Failed to delete user:",e)}finally{S(!1)}}},$=async()=>{if(N){S(!0);try{let e=await (0,i.sg)(`/admin/users/${N._id}/reset-password`,{});M(e.temporary_password)}catch(e){console.error("Failed to reset password:",e)}finally{S(!1)}}},L=async()=>{try{let e=await (0,i.R1)("/admin/export/users"),t=new Blob([e.content],{type:"text/csv"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e.filename,a.click()}catch(e){console.error("Failed to export:",e)}};return(0,a.jsxs)(l.Z,{role:"admin",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Users"}),(0,a.jsxs)("p",{className:"text-gray-500 mt-1",children:[e.length," total users"]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:z,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium text-gray-700 flex items-center gap-2",children:[a.jsx(d.Z,{size:18}),"Refresh"]}),(0,a.jsxs)("button",{onClick:L,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-xl font-medium text-white flex items-center gap-2",children:[a.jsx(o,{size:18}),"Export CSV"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(c.Z,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by email or name...",value:b,onChange:e=>f(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Users"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"paid",children:"Paid"}),a.jsx("option",{value:"unpaid",children:"Unpaid"})]})]}),a.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:y?a.jsx("div",{className:"p-8 text-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):0===s.length?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"No users found"}):(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"User"}),a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Status"}),a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Payment"}),a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Mentor"}),a.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Created"}),a.jsx("th",{className:"text-right py-4 px-6 text-sm font-medium text-gray-500",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 font-medium",children:(e.name||e.email)?.[0]?.toUpperCase()})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.name||"No name"}),a.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"active"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:e.status})}),a.jsx("td",{className:"py-4 px-6",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"paid"===e.payment_status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:e.payment_status||"unpaid"})}),a.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:e.mentor_id||"-"}),a.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString():"-"}),a.jsx("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:["pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>E(e),className:"p-2 hover:bg-green-100 rounded-lg text-green-600 transition-colors",title:"Approve",children:a.jsx(x.Z,{size:18})}),a.jsx("button",{onClick:()=>F(e),className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-colors",title:"Deny",children:a.jsx(u.Z,{size:18})})]}),a.jsx("button",{onClick:()=>{w(e),M(""),P(!0)},className:"p-2 hover:bg-blue-100 rounded-lg text-blue-600 transition-colors",title:"Reset Password",children:a.jsx(m.Z,{size:18})}),a.jsx("button",{onClick:()=>{w(e),_(!0)},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-colors",title:"Delete",children:a.jsx(p.Z,{size:18})})]})})]},e._id))})]})})]}),a.jsx(n.Z,{isOpen:k,onClose:()=>_(!1),title:"Delete User",size:"sm",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-gray-600",children:["Are you sure you want to delete ",a.jsx("strong",{children:N?.email}),"? This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>_(!1),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium",children:"Cancel"}),a.jsx("button",{onClick:U,disabled:q,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 rounded-xl font-medium text-white disabled:opacity-50",children:q?"Deleting...":"Delete"})]})]})}),a.jsx(n.Z,{isOpen:C,onClose:()=>P(!1),title:"Reset Password",size:"sm",children:a.jsx("div",{className:"space-y-4",children:Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-gray-600",children:["Temporary password generated for ",a.jsx("strong",{children:N?.email}),":"]}),a.jsx("div",{className:"bg-gray-100 p-4 rounded-xl font-mono text-lg text-center select-all",children:Z}),a.jsx("p",{className:"text-sm text-gray-500",children:"User will be required to change this password on next login."}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Z),alert("Password copied to clipboard!")},className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl font-medium text-white",children:"Copy Password"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-gray-600",children:["Generate a temporary password for ",a.jsx("strong",{children:N?.email}),"?"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium",children:"Cancel"}),a.jsx("button",{onClick:$,disabled:q,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl font-medium text-white disabled:opacity-50",children:q?"Generating...":"Generate"})]})]})})})]})}},9406:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(2295);let r=(0,s(7075).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var l=s(3729);function n({isOpen:e,onClose:t,title:s,children:n,size:i="md"}){return((0,l.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),(0,a.jsxs)("div",{className:`relative bg-white rounded-2xl shadow-xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl"}[i]} mx-4 max-h-[90vh] overflow-auto`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(r,{size:20,className:"text-gray-500"})})]}),a.jsx("div",{className:"p-6",children:n})]})]}):null}},3733:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8765:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8271:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},5366:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},2817:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},1985:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let a=(0,s(6843).createProxy)(String.raw`/app/mi-web/app/admin/users/page.tsx`),{__esModule:r,$$typeof:l}=a,n=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[73,336],()=>s(4122));module.exports=a})();