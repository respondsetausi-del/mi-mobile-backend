(()=>{var e={};e.id=158,e.ids=[158],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8105:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(482),a=s(9108),l=s(2563),n=s.n(l),i=s(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["mentor",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4598)),"/app/mi-web/app/mentor/users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/app/mi-web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/app/mi-web/app/mentor/users/page.tsx"],x="/mentor/users/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/mentor/users/page",pathname:"/mentor/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1993:(e,t,s)=>{Promise.resolve().then(s.bind(s,6108))},6108:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(2295),a=s(3729),l=s(8480),n=s(9406),i=s(8117),o=s(3733),d=s(8765),c=s(9895),x=s(2817),u=s(5366),p=s(2965);function m(){let[e,t]=(0,a.useState)([]),[s,m]=(0,a.useState)([]),[h,y]=(0,a.useState)(!0),[g,f]=(0,a.useState)(""),[j,v]=(0,a.useState)("all"),[b,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(!1),[_,P]=(0,a.useState)(""),[C,Z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{q()},[]),(0,a.useEffect)(()=>{M()},[e,g,j]);let q=async()=>{try{let e=await (0,i.R1)("/mentor/users");t(e.users||[])}catch(e){console.error("Failed to load users:",e)}finally{y(!1)}},M=()=>{let t=[...e];if(g){let e=g.toLowerCase();t=t.filter(t=>t.email?.toLowerCase().includes(e)||t.name?.toLowerCase().includes(e))}"active"===j&&(t=t.filter(e=>"active"===e.status)),"pending"===j&&(t=t.filter(e=>"pending"===e.status)),m(t)},S=async e=>{Z(!0);try{await (0,i.sg)(`/mentor/users/${e._id}/activate`,{}),q()}catch(e){console.error("Failed to activate user:",e)}finally{Z(!1)}},z=async e=>{Z(!0);try{await (0,i.sg)(`/mentor/users/${e._id}/deactivate`,{}),q()}catch(e){console.error("Failed to deactivate user:",e)}finally{Z(!1)}},A=async()=>{if(b){Z(!0);try{let e=await (0,i.sg)(`/mentor/users/${b._id}/reset-password`,{});P(e.temporary_password)}catch(e){console.error("Failed to reset password:",e)}finally{Z(!1)}}};return(0,r.jsxs)(l.Z,{role:"mentor",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Users"}),(0,r.jsxs)("p",{className:"text-gray-500 mt-1",children:[e.length," total users"]})]}),(0,r.jsxs)("button",{onClick:q,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium text-gray-700 flex items-center gap-2",children:[r.jsx(o.Z,{size:18}),"Refresh"]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[r.jsx(d.Z,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by email or name...",value:g,onChange:e=>f(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,r.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[r.jsx("option",{value:"all",children:"All Users"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"pending",children:"Pending"})]})]}),r.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:h?r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"})}):0===s.length?(0,r.jsxs)("div",{className:"p-8 text-center",children:[r.jsx(c.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No users found"})]}):(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"User"}),r.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Status"}),r.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Payment"}),r.jsx("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"License Key"}),r.jsx("th",{className:"text-right py-4 px-6 text-sm font-medium text-gray-500",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"py-4 px-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-purple-600 font-medium",children:(e.name||e.email)?.[0]?.toUpperCase()})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.name||"No name"}),r.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),r.jsx("td",{className:"py-4 px-6",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"active"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:e.status})}),r.jsx("td",{className:"py-4 px-6",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"paid"===e.payment_status?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:e.payment_status||"unpaid"})}),r.jsx("td",{className:"py-4 px-6",children:e.license_key?r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono",children:e.license_key}):r.jsx("span",{className:"text-gray-400 text-sm",children:"-"})}),r.jsx("td",{className:"py-4 px-6",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:["active"===e.status?r.jsx("button",{onClick:()=>z(e),className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-colors",title:"Deactivate",children:r.jsx(x.Z,{size:18})}):r.jsx("button",{onClick:()=>S(e),className:"p-2 hover:bg-green-100 rounded-lg text-green-600 transition-colors",title:"Activate",children:r.jsx(u.Z,{size:18})}),r.jsx("button",{onClick:()=>{N(e),P(""),k(!0)},className:"p-2 hover:bg-purple-100 rounded-lg text-purple-600 transition-colors",title:"Reset Password",children:r.jsx(p.Z,{size:18})})]})})]},e._id))})]})})]}),r.jsx(n.Z,{isOpen:w,onClose:()=>k(!1),title:"Reset Password",size:"sm",children:r.jsx("div",{className:"space-y-4",children:_?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"text-gray-600",children:["Temporary password for ",r.jsx("strong",{children:b?.email}),":"]}),r.jsx("div",{className:"bg-gray-100 p-4 rounded-xl font-mono text-lg text-center select-all",children:_}),r.jsx("p",{className:"text-sm text-gray-500",children:"User must change this on next login."}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(_),alert("Password copied!")},className:"w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-medium text-white",children:"Copy Password"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"text-gray-600",children:["Generate a temporary password for ",r.jsx("strong",{children:b?.email}),"?"]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium",children:"Cancel"}),r.jsx("button",{onClick:A,disabled:C,className:"flex-1 px-4 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-medium text-white disabled:opacity-50",children:C?"Generating...":"Generate"})]})]})})})]})}},9406:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(2295);let a=(0,s(7075).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var l=s(3729);function n({isOpen:e,onClose:t,title:s,children:n,size:i="md"}){return((0,l.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e)?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),(0,r.jsxs)("div",{className:`relative bg-white rounded-2xl shadow-xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl"}[i]} mx-4 max-h-[90vh] overflow-auto`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(a,{size:20,className:"text-gray-500"})})]}),r.jsx("div",{className:"p-6",children:n})]})]}):null}},3733:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(7075).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8765:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(7075).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},5366:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(7075).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},2817:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(7075).Z)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},4598:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`/app/mi-web/app/mentor/users/page.tsx`),{__esModule:a,$$typeof:l}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[73,336],()=>s(8105));module.exports=r})();