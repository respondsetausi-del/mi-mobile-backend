(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[275],{2442:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5531).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6224:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5531).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5531).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8117:function(e,t,s){Promise.resolve().then(s.bind(s,2768))},2768:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),r=s(2265),l=s(8674),n=s(826),i=s(4280),c=s(9883),d=s(1827),o=s(774),u=s(2442),x=s(6224);function h(){let[e,t]=(0,r.useState)([]),[s,h]=(0,r.useState)([]),[p,m]=(0,r.useState)(!0),[g,y]=(0,r.useState)(""),[f,b]=(0,r.useState)("all"),[j,N]=(0,r.useState)(!1),[v,w]=(0,r.useState)(1),[k,C]=(0,r.useState)("");(0,r.useEffect)(()=>{Z()},[]),(0,r.useEffect)(()=>{S()},[e,g,f]);let Z=async()=>{try{let e=await (0,n.R1)("/mentor/licenses");t(e.licenses||[])}catch(e){console.error("Failed to load licenses:",e)}finally{m(!1)}},S=()=>{let t=[...e];if(g){let e=g.toLowerCase();t=t.filter(t=>{var s,a;return(null===(s=t.key)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=t.assigned_to)||void 0===a?void 0:a.toLowerCase().includes(e))})}"used"===f&&(t=t.filter(e=>"used"===e.status)),"unused"===f&&(t=t.filter(e=>"used"!==e.status)),h(t)},_=async()=>{N(!0);try{await (0,n.sg)("/mentor/licenses/generate",{count:v}),Z()}catch(e){console.error("Failed to generate licenses:",e)}finally{N(!1)}},L=e=>{navigator.clipboard.writeText(e),C(e),setTimeout(()=>C(""),2e3)},z=e.filter(e=>"used"===e.status).length,M=e.filter(e=>"used"!==e.status).length;return(0,a.jsx)(l.Z,{role:"mentor",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Licenses"}),(0,a.jsxs)("p",{className:"text-gray-500 mt-1",children:[z," used \xb7 ",M," available"]})]}),(0,a.jsxs)("button",{onClick:Z,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium text-gray-700 flex items-center gap-2",children:[(0,a.jsx)(i.Z,{size:18}),"Refresh"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generate New Licenses"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"number",min:1,max:100,value:v,onChange:e=>w(Math.max(1,Math.min(100,parseInt(e.target.value)||1))),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Number of licenses"})}),(0,a.jsxs)("button",{onClick:_,disabled:j,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-medium text-white flex items-center gap-2 disabled:opacity-50",children:[(0,a.jsx)(c.Z,{size:18}),j?"Generating...":"Generate ".concat(v," License").concat(v>1?"s":"")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(d.Z,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by key or assigned user...",value:g,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,a.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"all",children:"All Licenses"}),(0,a.jsx)("option",{value:"used",children:"Used"}),(0,a.jsx)("option",{value:"unused",children:"Available"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:p?(0,a.jsx)("div",{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"})}):0===s.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(o.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No licenses found"})]}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"License Key"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Assigned To"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Created"}),(0,a.jsx)("th",{className:"text-right py-4 px-6 text-sm font-medium text-gray-500",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsx)("code",{className:"bg-gray-100 px-3 py-1 rounded-lg text-sm font-mono",children:e.key})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("used"===e.status?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"),children:"used"===e.status?"Used":"Available"})}),(0,a.jsx)("td",{className:"py-4 px-6 text-sm text-gray-500",children:e.assigned_to||"-"}),(0,a.jsx)("td",{className:"py-4 px-6 text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString():"-"}),(0,a.jsx)("td",{className:"py-4 px-6 text-right",children:(0,a.jsx)("button",{onClick:()=>L(e.key),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-600 transition-colors",title:"Copy to clipboard",children:k===e.key?(0,a.jsx)(u.Z,{size:18,className:"text-green-600"}):(0,a.jsx)(x.Z,{size:18})})})]},e._id||e.key))})]})})]})})}}},function(e){e.O(0,[439,971,938,744],function(){return e(e.s=8117)}),_N_E=e.O()}]);