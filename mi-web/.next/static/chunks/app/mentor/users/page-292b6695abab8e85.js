(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{2527:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(5531).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},3056:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(5531).Z)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},9293:function(e,s,t){Promise.resolve().then(t.bind(t,2672))},2672:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(7437),l=t(2265),r=t(8674),n=t(2266),i=t(826),c=t(4280),d=t(1827),o=t(5750),x=t(3056),u=t(2527),m=t(774);function p(){let[e,s]=(0,l.useState)([]),[t,p]=(0,l.useState)([]),[h,y]=(0,l.useState)(!0),[g,f]=(0,l.useState)(""),[j,v]=(0,l.useState)("all"),[b,N]=(0,l.useState)(null),[w,k]=(0,l.useState)(!1),[C,_]=(0,l.useState)(""),[Z,z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{S()},[]),(0,l.useEffect)(()=>{P()},[e,g,j]);let S=async()=>{try{let e=await (0,i.R1)("/mentor/users");s(e.users||[])}catch(e){console.error("Failed to load users:",e)}finally{y(!1)}},P=()=>{let s=[...e];if(g){let e=g.toLowerCase();s=s.filter(s=>{var t,a;return(null===(t=s.email)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(a=s.name)||void 0===a?void 0:a.toLowerCase().includes(e))})}"active"===j&&(s=s.filter(e=>"active"===e.status)),"pending"===j&&(s=s.filter(e=>"pending"===e.status)),p(s)},E=async e=>{z(!0);try{await (0,i.sg)("/mentor/users/".concat(e._id,"/activate"),{}),S()}catch(e){console.error("Failed to activate user:",e)}finally{z(!1)}},F=async e=>{z(!0);try{await (0,i.sg)("/mentor/users/".concat(e._id,"/deactivate"),{}),S()}catch(e){console.error("Failed to deactivate user:",e)}finally{z(!1)}},U=async()=>{if(b){z(!0);try{let e=await (0,i.sg)("/mentor/users/".concat(b._id,"/reset-password"),{});_(e.temporary_password)}catch(e){console.error("Failed to reset password:",e)}finally{z(!1)}}};return(0,a.jsxs)(r.Z,{role:"mentor",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Users"}),(0,a.jsxs)("p",{className:"text-gray-500 mt-1",children:[e.length," total users"]})]}),(0,a.jsxs)("button",{onClick:S,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium text-gray-700 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{size:18}),"Refresh"]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(d.Z,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by email or name...",value:g,onChange:e=>f(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,a.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"all",children:"All Users"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"pending",children:"Pending"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:h?(0,a.jsx)("div",{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"})}):0===t.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(o.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No users found"})]}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"User"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Payment"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"License Key"}),(0,a.jsx)("th",{className:"text-right py-4 px-6 text-sm font-medium text-gray-500",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:t.map(e=>{var s,t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:null===(t=e.name||e.email)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name||"No name"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.status})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("paid"===e.payment_status?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"),children:e.payment_status||"unpaid"})}),(0,a.jsx)("td",{className:"py-4 px-6",children:e.license_key?(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono",children:e.license_key}):(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:["active"===e.status?(0,a.jsx)("button",{onClick:()=>F(e),className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-colors",title:"Deactivate",children:(0,a.jsx)(x.Z,{size:18})}):(0,a.jsx)("button",{onClick:()=>E(e),className:"p-2 hover:bg-green-100 rounded-lg text-green-600 transition-colors",title:"Activate",children:(0,a.jsx)(u.Z,{size:18})}),(0,a.jsx)("button",{onClick:()=>{N(e),_(""),k(!0)},className:"p-2 hover:bg-purple-100 rounded-lg text-purple-600 transition-colors",title:"Reset Password",children:(0,a.jsx)(m.Z,{size:18})})]})})]},e._id)})})]})})]}),(0,a.jsx)(n.Z,{isOpen:w,onClose:()=>k(!1),title:"Reset Password",size:"sm",children:(0,a.jsx)("div",{className:"space-y-4",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-gray-600",children:["Temporary password for ",(0,a.jsx)("strong",{children:null==b?void 0:b.email}),":"]}),(0,a.jsx)("div",{className:"bg-gray-100 p-4 rounded-xl font-mono text-lg text-center select-all",children:C}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"User must change this on next login."}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(C),alert("Password copied!")},className:"w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-medium text-white",children:"Copy Password"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-gray-600",children:["Generate a temporary password for ",(0,a.jsx)("strong",{children:null==b?void 0:b.email}),"?"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium",children:"Cancel"}),(0,a.jsx)("button",{onClick:U,disabled:Z,className:"flex-1 px-4 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-medium text-white disabled:opacity-50",children:Z?"Generating...":"Generate"})]})]})})})]})}},2266:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(7437);let l=(0,t(5531).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var r=t(2265);function n(e){let{isOpen:s,onClose:t,title:n,children:i,size:c="md"}=e;return((0,r.useEffect)(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),s)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:t}),(0,a.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl"}[c]," mx-4 max-h-[90vh] overflow-auto"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:n}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(l,{size:20,className:"text-gray-500"})})]}),(0,a.jsx)("div",{className:"p-6",children:i})]})]}):null}}},function(e){e.O(0,[439,971,938,744],function(){return e(e.s=9293)}),_N_E=e.O()}]);